---
editor_options: 
  chunk_output_type: console
---

# Within and between patch variance in traits

Here we relate the extent of temporal and spatial overlap to pairwise differences in traits.

## Read in patch data and overlaps

```{r}
library(data.table)
library(ggplot2)
library(scales)
library(tidyr); library(tibble)
library(magrittr)

# stats
library(lmerTest)

# ci fun
ci <- function(x){qnorm(0.975)*sd(x, na.rm = T)/sqrt((length(x)))}
```

```{r}
# read in patch data
data_patches <- fread("data/data2018/data_2018_patch_summary_has_patches.csv")
# read in flock data
data <- fread("data/data2018/data_patch_flocks_2018.csv")
data[,V1:=NULL]
```

## Link overlap with id data

First identify unique patches in the patch data.

```{r}
# add a uid, this corresponds to the uid in the overlap data
data_patches[,uid:=1:nrow(data_patches)]
```

Now link the individual identity and other environmental covariates to the overlap data. Begin by subsetting the data to get some idea of how many patches (of the original 90000) overlap with others.
